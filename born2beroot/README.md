Born2beRoot
=
LVM (Logical Volume Manager)
-
  - LVM은 리눅스의 저장 공간을 효율적이고 유연하게 관리하기 위한 커널의 한 부분이다.
  - 여러 개의 하드 드라이브 또는 파티션을 하나의 논리적 블록으로 합칠 수 있다.
  - 장점
    - 유연한 용량 변경
    - 크기 조절이 가능한 스토리지 pool
    - disk striping, mirror volume 등 제공  
  ```
  - 일반 Disk Partitioning과의 차이점
    - 기존 방식의 경우, 하드디스크를 파티셔닝 한 후 OS 영역에 마운트하여 read/write를 수행 하였다.
    - 이 경우 크기가 고정적이기 때문에 증설/축소가 어렵다.
    - 반면, LVM은 파티션 대신에 volume이라는 단위로 저장 장치를 다룬다.
    - LVM은 스토리지 확장과 변경에 유연하고 크기를 변경할 때 데이터의 이전이 필요 없다.
  ```
  ```
  - Disk Striping
    - 성능 향상을 위해 단일 파일과 같은 논리적으로 연속된 데이터 세그먼트들이, 물리적으로 여러 개의 장치 나뉘어 기록될 수 있는 것이다.
    - 데이터가 여러 개의 드라이브에 걸쳐 일정 크기의 바이트 또는 섹터별로 나뉘어 기록된다.
  - Mirror Volume
    - Mirror Volume은 두 개이상의 물리적 디스크에 데이터를 복제하는 내결합성 불륨입니다.
    - 데이터를 한 곳에 저장하는 것이 아닌 다른 하나의 저장 매체에 같은 내용을 중복 저장하게 되면서 하나의 디스크에 오류가 나도 다른 디스크로 사용이 가능하며 원본 자체가 존재하기 때문에 복원력은 최고이다.
    - 하지만 같은 데이터를 중복 저장하기 때문에 용량의 낭비가 심하다.
  ```
~~~
LVM 관련 용어
- 물리적 불륨(PV, Physical Volume)
  - 실제 디스크 장치를 분할한 파티션 된 상태를 의미한다.
  - PV는 일정한 크기의 PE로 구성된다.
- 물리적 확장(PE, Physical Extent)
  - PV를 구성하는 일정한 크기의 Block
  - 보통 1PE는 4MB에 해당
  - PE와 LE는 1:1 대응
- 불륨 그룹(VG, Volume Group)
  - 물리적인 디스크의 크기와 수에 따라 유연하게 조정되며, 물리적인 디스크 파티션의 크기와 관계 없이 논리적인 불륨 생성이 가능하다.
- 논리적 불륨(LV, Logical Volume)
  - LVM에서 생성된 가상 디스크로, Volume Grop에서 논리적인 공간을 차지한다
  - VG에서 공간을 할당 받아, 블록 디바이스로 구성됩니다.
  - LV를 생산하면 물리적인 디스크 파티션의 수에 구애받지 않고 필요한 만큼 논리적인 공간을 할당 할 수 있다.
~~~
apt와 aptitude
-
- 두 개 모두 패키지 관리 도구
- apt
  - apt는 기본적으로 제공되는 고급 패키지 관리 도구
  - apt는 빠르고 사용자 친화적
  - 소프트웨어 패키지를 설치, 삭제, 업데이트 하는데 사용 되며 의존성 문제를 자동으로 처리한다.
- aptitude
  - debian에서 사용 가능한 고급 패키지 관리자
  - apt와 비슷한 기능을 제공하지만 좀 더 강력한 의존성 처리 기능과 사용자 친화적 인터페이스 제공
  - 사용자가 설치하려는 패키지와 다른 패키지를 자동으로 처리하며, 패키지 의존성 문제를 처리하는데 좀 더 뛰어난 기능 제공
- apt는 단순하고 빠른 패키지 관리를 위한 유틸리티이고, aptitude는 조금 더 복잡한 패키지 관리 및 의존성 처리를 위한 유틸리티.  

SElinux와 AppArmor
-
- SElinux와 AppArmor는 모두 Linux에서 Mandatory Access Control을 구현하기 위한 보안 프레임워크
- SElinux
  - 각 프로세스 및 파일에 대한 보안 정책을 적용하여 보안 위협으로부터 보호한다.
  - SElinux는 파일 및 디렉토리, 네트워크 및 프로세스 보안을 구현
  - SElinux는 정책 구문 분석 및 정책 구현을 수행하므로, 고급 보안 요구 사항에 적합 하지만, 복잡한 구현이 필요하고 응용프로그램이 원하는대로 작동하지 않을 수도 있다.
- AppArmor
  - AppArmor는 각 응용 프로그램에 대한 보안 프로파일을 만들어 실행 중 프로그램이 할 수 있는 동작을 제한한다.
  - AppArmor는 SElinux 보다 적극적이진 않지만, 간단한 구성과 응용 프로그램이 작동하는데 더 많은 유연성 제공
  
명령어
-
- gpasswd
  - /etc/group과 /etc/gshadow를 관리하는 명령어
  - 옵션
    - a <사용자> <그룹>
      - 사용자를 그룹에 추가
    - d <사용자> <그룹>
      - 사용자를 그룹에서 제거
- usermod
  - usermod는 사용자 계정의 속성을 변경하는데 사용하는 명령어
  - option
    - aG <그룹> <사용자>
      - 사용자를 그룹에 추가
- useradd
  - useradd는 새로운 사용자를 추가하는 명령어
  - useradd <username> 후 passwd <username>을 통해 비밀번호를 설정해주어야 로그인이 가능하다.
- chage
  - 사용자 계정의 암호 만료 정보를 수정하는 데 사용
  - 시스템 관리자는 최대 및 최소 암호 사용 기간, 암호 만료 경고 기간 및 너무 많은 로그인 시도 후 계정 잠금 등 다양한 암호 정책 설정을 변경할 수 있다.
  - 옵션
    - d <날짜>
      - 계정의 마지막 암호 변경일을 날짜 이전으로 설정
    - E <만료 날짜>
      - 계정의 만료 날짜를 만료 날짜로 설정
    - I <비활성화 기간>
      - 계정이 비활성화 되는 기간을 비활성화 기간으로 설정
    - m <최소 일수>
      - 암호를 변경할 수 있는 최소 일수를 최소 일수로 설정
    - M <최대 일수>
      - 암호를 변경해야 하는 최대 일수를 최대 일수로 설정
    - W <날짜>
      - 암호 만료 경고를 발생시키는 일수를 날짜로 설정
  
설정 관련
-
  - /etc/login.defs
    - pass_max_days, pass_min_days 변경으로 사용자 암호 만료 정보 수정
  - libpam-cracklib
    - libpam-cracklib는 debian에서 사용자 암호를 검증하는데 사용하는 모듈
    1.  libpam-cracklib 설치 (sudo apt-get install libpam-cracklib)
    2.  /etc/pam.d/common-passwd 파일을 편집
        - minlen, ucredit, lcredit, dcredit, ocredit은 각각 대문자 소문자 숫자 특수 문자를 지정
        - maxrepeat : 최대 같은 문자 반복횟수 지정, reject_username
  - pam(pluggable Authentication Module: 착탈형 인증 모듈)
    - 사용자를 인증하고 그 사용자의 서비스에 대한 엑세스를 제어하는 모듈화된 기법.
    - https://www.igloo.co.kr/security-information/%EB%A6%AC%EB%88%85%EC%8A%A4-pam-%EB%AA%A8%EB%93%88%EC%9D%98-%EC%9D%B4%ED%95%B4/
